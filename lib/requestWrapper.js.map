{"version":3,"sources":["../src/requestWrapper.js"],"names":[],"mappings":";;;;;;;;QAagB,c,GAAA,c;;AAbhB;;AACA;;AACA;;;;AAGA,IAAM,iBAAiB;AACrB,aAAW,KADU;AAErB,gBAAc,KAFO;AAGrB,kBAAgB,KAHK;AAIrB,eAAa;AAJQ,CAAvB;;AAQO,SAAS,cAAT,CAAwB,OAAxB,EAAiC,eAAjC,EAAgE;AAAA;;AAAA,MAAd,OAAc,yDAAJ,EAAI;;AAAA,2CAOhE,cAPgE,EAQhE,OARgE;;AAAA,MAEnE,SAFmE,yBAEnE,SAFmE;AAAA,MAGnE,YAHmE,yBAGnE,YAHmE;AAAA,MAInE,cAJmE,yBAInE,cAJmE;AAAA,MAKnE,WALmE,yBAKnE,WALmE;;;AAWrE,MAAI,gBAAgB,CAAC,SAArB,EAAgC;AAC9B,UAAM,IAAI,KAAJ,CAAU,wCAAV,CAAN;AACD;;AAED,MAAI,SAAJ,EAAe;AACb,sBAAkB,gBAAgB,WAAhB,CAA4B,SAA5B,CAAlB;AACD;AACD,MAAM,iBAAiB,YAAY,UAAU,WAAV,EAAZ,GAAsC,KAA7D;AACA,MAAM,iBAAiB,YAAa,UAAU,CAAV,EAAa,WAAb,KAA6B,UAAU,KAAV,CAAgB,CAAhB,CAA1C,GAAgE,KAAvF;;AAGA;AACA,MAAI,YAAY,wCAAiB,eAAjB,CAAhB;;AAEA;AACA,MAAI,UAAU,oCAAe,SAAf,CAAd;;AAEA;AACA,MAAI,QAAQ,gCAAa,OAAb,EAAsB,UAAU,OAAhC,EAAyC,OAAzC,EAAkD,EAAE,wBAAF,EAAlD,CAAZ;;AAEA,4DACG,eAAkB,cAAlB,gBAA6C,SADhD,EAC4D,UAAU,OADtE,+BAEG,eAAkB,cAAlB,gBAA6C,SAFhD,EAE4D,UAAU,OAFtE,+BAGG,eAAkB,cAAlB,gBAA6C,SAHhD,EAG4D,UAAU,OAHtE,+BAIG,eAAkB,cAAlB,gBAA6C,SAJhD,EAI4D,UAAU,OAJtE;AAMA,sDACG,eAAkB,SAAlB,eAAuC,SAD1C,EACsD,QAAQ,OAD9D,6BAEG,eAAkB,SAAlB,eAAuC,SAF1C,EAEsD,QAAQ,OAF9D,6BAGG,eAAkB,SAAlB,eAAuC,SAH1C,EAGsD,QAAQ,OAH9D,6BAIG,eAAkB,SAAlB,eAAuC,SAJ1C,EAIsD,QAAQ,OAJ9D;AAMA,gDACG,wBAAsB,cAAtB,eAAgD,aADnD,EACmE,MAAM,WADzE,2BAEG,4BAA0B,cAA1B,eAAoD,iBAFvD,EAE2E,MAAM,eAFjF;;AAKA,MAAI,cAAJ,EAAoB;AAClB,wBACK,SADL,EAEK,OAFL,EAGK,KAHL;AAKD;;AAED,SAAO;AACL,wBADK;AAEL,oBAFK;AAGL;AAHK,GAAP;AAKD","file":"requestWrapper.js","sourcesContent":["import { constantsBuilder } from './constantsBuilder.js';\nimport { actionsBuilder } from './actionsBuilder.js';\nimport { sagasBuilder } from './sagasBuilder.js';\n\n\nconst defaultOptions = {\n  namespace: false,\n  namedExports: false,\n  flattenExports: false,\n  throwErrors: false,\n};\n\n\nexport function requestWrapper(request, constantCreator, options = {}) {\n  const {\n    namespace,\n    namedExports,\n    flattenExports,\n    throwErrors,\n  } = {\n    ...defaultOptions,\n    ...options,\n  };\n\n  if (namedExports && !namespace) {\n    throw new Error('Namespaced exports require a namespace');\n  }\n\n  if (namespace) {\n    constantCreator = constantCreator.createChild(namespace);\n  }\n  const namespaceUpper = namespace ? namespace.toUpperCase() : false;\n  const namespaceTitle = namespace ? (namespace[0].toUpperCase() + namespace.slice(1)) : false;\n\n\n  // Constants\n  let constants = constantsBuilder(constantCreator);\n\n  // Actions\n  let actions = actionsBuilder(constants);\n\n  // Sagas\n  let sagas = sagasBuilder(request, constants.REQUEST, actions, { throwErrors });\n\n  constants = {\n    [namedExports ? `${namespaceUpper}_REQUEST` : 'REQUEST']: constants.REQUEST,\n    [namedExports ? `${namespaceUpper}_PENDING` : 'PENDING']: constants.PENDING,\n    [namedExports ? `${namespaceUpper}_SUCCESS` : 'SUCCESS']: constants.SUCCESS,\n    [namedExports ? `${namespaceUpper}_FAILURE` : 'FAILURE']: constants.FAILURE,\n  };\n  actions = {\n    [namedExports ? `${namespace}Request` : 'request']: actions.request,\n    [namedExports ? `${namespace}Pending` : 'pending']: actions.pending,\n    [namedExports ? `${namespace}Success` : 'success']: actions.success,\n    [namedExports ? `${namespace}Failure` : 'failure']: actions.failure,\n  };\n  sagas = {\n    [namedExports ? `make${namespaceTitle}Request` : 'makeRequest']: sagas.makeRequest,\n    [namedExports ? `watchFor${namespaceTitle}Request` : 'watchForRequest']: sagas.watchForRequest,\n  };\n\n  if (flattenExports) {\n    return {\n      ...constants,\n      ...actions,\n      ...sagas,\n    };\n  }\n\n  return {\n    constants,\n    actions,\n    sagas,\n  };\n}\n"]}